function shuffle(e){var i=e.map(Math.random);e.sort(function(e,t){return i[e]-i[t]})}function isValidEmail(e){var i=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return i.test(e)}function onYouTubeIframeAPIReady(){player1=new YT.Player("player-1")}function fixedHeader(){$(window).width()>1040&&!isMobile.any&&(myScroll>100?header.addClass("on"):header.removeClass("on"));var e=$(".menu").find(".current_page_parent");e.length&&($(window).width()>1040?myScroll>100?e.removeClass("openSubMenu"):e.addClass("openSubMenu"):e.removeClass("openSubMenu"))}function apparitionFooter(){isMobile.any||($(".navFooter").isOnScreen()?TweenMax.set($(".rsFooter"),{visibility:"visible"}):TweenMax.set($(".rsFooter"),{visibility:"hidden"}))}function scrollPage(){var e=$(".head");myScroll=$(document).scrollTop(),body.hasClass("landing")||(fixedHeader(),apparitionFooter()),!htmlTag.hasClass("lt-ie9")&&!isMobile.any&&myScroll<e.height()&&$(window).width()>767&&(TweenMax.set(bgHead,{y:-(myScroll/1.5)+"px"}),TweenMax.set(e.find(".content"),{y:+(myScroll/2.5)+"px"})),requestAnimFrame(scrollPage)}function setActiveMenu(){var e=$("#menu-menu-principal"),i=e.find("> li.current-menu-item"),t=e.find(".current_page_parent");i.length?i.siblings().find("a").addClass("notActive"):t.length?t.siblings().find("a").addClass("notActive"):e.find("a").removeClass("notActive")}function setSubMenu(){var e=$(".hasSubMenu");$(window).width()>1040?e.on("mouseover",function(){$(this).addClass("actifHover")}).on("mouseout",function(){$(this).removeClass("actifHover")}):e.unbind()}function centerSubMenu(){if(!htmlTag.hasClass("lt-ie9"))if($(window).width()>1040){var e=subMenus.length,i=0,t,n,s,o,a,l,r,d,u;for(i;e>i;i++){for(n=subMenus.eq(i).find("li"),s=n.length,t=0,o=0,t;s>t;t++)o+=n.eq(t).outerWidth();a=o/2,l=subMenus.eq(i).parents(".hasSubMenu"),r=l.outerWidth()/2,d=l.offset().left,u=r+d-a,o+u>=$(window).width()?subMenus.eq(i).css({paddingLeft:0,"text-align":"center"}):subMenus.eq(i).css("paddingLeft",u+"px")}}else subMenus.css("paddingLeft",0)}function langSelector(){var e=$(".lang"),i=e.find(".actif");e.prepend(i).find(".actif").eq(1).remove()}function setPosBtnMenu(){var e=$(".bottomHeader").find(".btnFull"),i=$(".topHeader").find("p");$(window).width()<1040?(e.css("top",minHeight),i.css("top",minHeight+80)):(e.css("top",0),i.css("top",0))}function responsiveMenu(){var e=$(window).height()-header.height(),i=$("#container");setPosBtnMenu(),burger.hasClass("actif")?i.css({height:"auto",overflow:"visible"}):(burger.css({opacity:0}).delay(10).animate({opacity:1},100),i.height(e>minHeight?e:htmlTag.hasClass("home")?minHeight:minHeight+100),i.css("overflow","hidden")),burger.toggleClass("actif"),header.toggleClass("menuVisible")}function setSliderTeam(e){function i(){var e=$(this).parents("li").index();t.eq(e).hasClass("on")||($(this).addClass("actif").parents("li").siblings().find("button").removeClass("actif"),t.eq(e).siblings().stop().animate({opacity:0,marginBottom:"-25px"},400,function(){t.eq(e).addClass("on").stop().animate({opacity:1,marginBottom:0},400).siblings().removeClass("on")})),$("#nomContact").attr("value",t.eq(e).find("strong").html())}var t=e.find(".slideTeam"),n=t.length,s=0,o=$(".navTeam"),a="<li><button>•</button></li>",l=$(".slidesTeam"),r=l.length,d=0,u,c=Math.floor(Math.random()*n);for(d;r>d;d++)l.eq(d).hasClass("on")||l.eq(d).css({opacity:0,bottom:"-140px"});if(t.removeClass("on").eq(c).addClass("on").stop().animate({opacity:1,marginBottom:0},400),o.html(""),n>1)for(s;n>s;s++)o.append(a),t.eq(s).hasClass("on")?u=s:t.eq(s).css({opacity:0,marginBottom:"-25px"});$("#nomContact").attr("value",t.eq(c).find("strong").html()),o.find("button").eq(u).addClass("actif"),o.find("button").on("click",i)}function setSliderTeamProfil(e){var i=e.parents("li").index(),t=$(".slidesTeam"),n=t.eq(i),s=$(".contactFooter"),o=130,a=235,l=334;body.hasClass("en")&&(o=121,a=233,l=337),e.addClass("actif").parents("li").siblings().find("button").removeClass(),n.hasClass("on")||(n.siblings(".slidesTeam").stop().animate({opacity:0,bottom:"-140px"},400,function(){n.addClass("on").stop().animate({opacity:1,bottom:"-115px"},400).siblings(".slidesTeam").removeClass("on"),0===i?(TweenLite.set($("#drag"),{x:0}),s.addClass("bleu").removeClass("rose rouge vert")):1===i?(TweenLite.set($("#drag"),{x:o}),s.addClass("rouge").removeClass("rose bleu vert")):2===i?(TweenLite.set($("#drag"),{x:a}),s.addClass("vert").removeClass("rose rouge bleu")):3===i&&(TweenLite.set($("#drag"),{x:l}),s.addClass("rose").removeClass("bleu rouge vert"))}),setSliderTeam(n)),$("#profil").find("option[value="+e.attr("name")+"]").prop("selected",!0);var r="Autre"===e.html()?"Organisation":e.html();$("#labelEnt").html(r+" *"),$("#nomContact").attr("value",n.find(".slideTeam.on").find("strong").html())}function setDraggableButton(){var e=$(".buttonsTeam").find("button"),i=130,t=235,n=334;body.hasClass("en")&&(i=121,t=233,n=337),btnContact.before("<div id='dragIn'><div id='drag'></div></div>"),Draggable.create("#drag",{type:"x",bounds:$("#dragIn"),cursor:"pointer",throwProps:!0,snap:[0,i,t,n],throwResistance:5e3,maxDuration:3,onThrowComplete:function(){var s;switch(this.x){case 0:s=e.eq(0);break;case i:s=e.eq(1);break;case t:s=e.eq(2);break;case n:s=e.eq(3)}setSliderTeamProfil(s)}})}function openForm(){btnContact.length?btnContact.animate({opacity:0},200,function(){btnContact.css("display","none"),$("#contact, #bulle").addClass("visible"),setTimeout(function(){htmlBody.animate({scrollTop:$("#contact").offset().top-250},400,"easeInOutCubic")},300),$("#nom").focus()}):setTimeout(function(){htmlBody.animate({scrollTop:$(".formContact").offset().top-200},500,"easeInOutCubic")},300)}function scrollMagic(){if($(window).width()>767)var e=new ScrollMagic,i=TweenMax.to($("#triangle-top-header"),1.2,{css:{y:"0px",rotation:"0deg",force3D:!0}}),t=TweenMax.to($(".triangle-menu-footer"),1.2,{css:{rotation:"-3deg",y:"0px",opacity:"1",force3D:!0}}),n=new ScrollScene({triggerElement:".menuFooter",duration:$(".menuFooter").outerHeight(),offset:-300}).setTween(t).addTo(e)}function goToNextSection(){htmlBody.animate({scrollTop:$(this).parents(".scrollHere").next().offset().top-100},400)}function heightBgHead(){$(window).width()>767?(htmlTag.hasClass("lt-ie9")||isMobile.any||TweenMax.set(bgHead,{position:"fixed"}),TweenMax.set(bgHead,{height:Math.ceil($(".head").height())-1+"px"})):(htmlTag.hasClass("home")&&TweenMax.set(bgHead,{height:"340px"}),TweenMax.set(bgHead,{position:"absolute"}))}function videoCover(){function e(){isMobile.phone||player1.playVideo()}var i=new TimelineMax({onComplete:e});return i.to($(".zone-txt-cover-video"),.2,{y:"100px",opacity:"0",ease:Cubic.easeInOut}).to($(".bg-cover-video"),.5,{rotationZ:1,rotation:"-45deg",y:"-100%",transformOrigin:"left bottom",ease:Cubic.easeInOut}).set($(".cover-video"),{display:"none"}),!1}function randomLogosPress(){var e=$(".logosPresse").find("img"),i=e.length,t=0,n=4,s=0,o=[];if(i>n){for(s;i>s;s++)o[s]=s;for(shuffle(o),e.css("display","none"),t;n>t;t++)e.eq(o[t]).css("display","inline-block")}}function goToContent(){setTimeout(function(){htmlBody.animate({scrollTop:$(".wrapper").offset().top-100},400)},400)}function setMapSize(){$("#map").height($(window).height()-header.height())}function setToolTip(e){var i=e.find(".lien"),t=i.length,n=0,s=[],o;if(""!==i.attr("title")){for(n;t>n;n++)s[n]=i.eq(n).attr("title"),i.eq(n).removeAttr("title").append("<span class='tooltip' style='display:none'>"+s[n]+"</span>");i.on("mouseenter",function(){$(this).find(".tooltip").delay(300).css("display","block")}).on("mouseleave",function(){setTimeout(function(){$(this).find(".tooltip").css("display","none")},300)}),i.on("mousemove",function(e){o=$(this).offset(),$(this).find(".tooltip").css({top:e.pageY-o.top+20,left:e.pageX-o.left-20})})}}function setSliderHeight(e){function i(e){var i=e.find("ul").eq(0).find("li"),t=i.length,n=0,s=0;for(n;t>n;n++)i.eq(n).height()>s&&(s=i.eq(n).height());e.find("ul").eq(0).css("height",s+"px")}var t=0,n=e.length;for(t;n>t;t++)i(e.eq(t))}function initAnnonces(){TweenMax.set($(".whr-item"),{display:"block"})}function positionDiapos(){var e=$("#slider-diapos"),i=e.find("li");i.each(function(e){var i=$(this).find("img").width()+10;if($(this).hasClass("half"))if(0!==precWidth){var t=i;precWidth>=t?(TweenMax.set($(this),{top:"50%",left:avancementLeft+avancementLeftBottom+"px"}),precWidth-=t,hasDemiBefore=!0,avancementLeftBottom+=i):(avancementLeft+=avancementLeftFuture,TweenMax.set($(this),{top:0,left:avancementLeft+"px"}),avancementLeftFuture=i,hasDemiBefore=!1,avancementLeftBottom=0)}else avancementLeft+=avancementLeftFuture,TweenMax.set($(this),{top:0,left:avancementLeft+"px"}),precWidth=i,avancementLeftFuture=i,hasDemiBefore=!1,avancementLeftBottom=0;else avancementLeft+=avancementLeftFuture,avancementLeftFuture=0,TweenMax.set($(this),{top:0,left:avancementLeft+"px"}),avancementLeft+=i,hasDemiBefore=!1,avancementLeftBottom=0,precWidth=0,hasDemiBefore=!1}),TweenMax.set(e,{width:avancementLeft+avancementLeftFuture+"px"}),Draggable.create("#slider-diapos",{type:"x",edgeResistance:.65,bounds:"#container-slider-diapos",throwProps:!0})}function setSizeMission(){TweenMax.set($("#slider-txt-mission"),{width:$("#slider-visu-mission").find("li").length*$("#wrapper-slider-visu-mission").width()+"px"}),TweenMax.set($("#slider-txt-mission").find("li"),{width:$("#wrapper-slider-visu-mission").width()+"px"}),TweenMax.set($("#slider-visu-mission"),{width:$("#slider-visu-mission").find("li").length*unit+bigUnitDelta+"px"})}function posSlideMission(){setSizeMission();var e=$("#slider-visu-mission li.active").index()-2;TweenMax.set($("#slider-visu-mission"),{left:"50%",marginLeft:-e*unit-(total*unit+bigUnitDelta)/2+"px",ease:Linear.easeIn}),TweenMax.set($("#slider-txt-mission"),{marginLeft:-(e+2)*$("#wrapper-slider-visu-mission").width()+"px",ease:Linear.easeIn})}function purgeMission(){$("#slider-visu-mission li").length>10&&($("#slider-visu-mission").find("li.active").index()>5&&($("#slider-visu-mission").find("li").first().remove(),$("#slider-txt-mission").find("li").first().remove(),$("#slider-visu-mission").find("li").first().remove(),$("#slider-txt-mission").find("li").first().remove()),$("#slider-visu-mission").find("li.active").index()<$("#slider-visu-mission li").length-5&&($("#slider-visu-mission").find("li").last().remove(),$("#slider-txt-mission").find("li").last().remove(),$("#slider-visu-mission").find("li").last().remove(),$("#slider-txt-mission").find("li").last().remove())),posSlideMission()}function makeActive(e){TweenMax.to($("#slider-visu-mission").find("a"),spee,{width:unitNaked+"px",height:unitNaked+"px",ease:Linear.easeIn}),TweenMax.to($("#slider-visu-mission").find("li"),spee,{width:unitNaked+"px",ease:Linear.easeIn}),$("#slider-visu-mission").find("li").removeClass("active"),TweenMax.to($("#slider-visu-mission").find("li").eq(e).find("a"),spee,{width:bigUnit+"px",height:bigUnit+"px",ease:Linear.easeIn}),TweenMax.to($("#slider-visu-mission").find("li").eq(e),spee,{width:bigUnit+"px",ease:Linear.easeIn,onComplete:purgeMission}),$("#slider-visu-mission").find("li").eq(e).addClass("active")}function slideMission(e){TweenMax.to($("#slider-visu-mission"),spee,{marginLeft:-e*unit-(total*unit+bigUnitDelta)/2-1+"px",ease:Linear.easeIn}),TweenMax.to($("#slider-txt-mission"),spee,{marginLeft:-(e+2)*$("#wrapper-slider-visu-mission").width()-1+"px",ease:Linear.easeIn}),makeActive(e+2)}function addEntityMission(){$("#slider-txt-mission li").eq($("#slider-txt-mission").find("li").length-total).clone().appendTo("#slider-txt-mission"),$("#slider-visu-mission li").eq($("#slider-visu-mission").find("li").length-total).clone().appendTo("#slider-visu-mission"),setSizeMission(),$("#slider-visu-mission li").eq($("#slider-visu-mission").find("li").length-1).find("a").unbind("click").on("click",clickOnMission)}function addEntityMissionAtBeginning(){$("#slider-txt-mission li").eq($("#slider-txt-mission").find("li").first().index()+4).clone().prependTo("#slider-txt-mission"),$("#slider-visu-mission li").eq($("#slider-visu-mission").find("li").first().index()+4).clone().prependTo("#slider-visu-mission"),posSlideMission(),$("#slider-visu-mission").first().find("a").unbind("click").on("click",clickOnMission)}function clickOnMission(e){e.preventDefault(),$(this).parent().index()>=$("#slider-visu-mission li").length-2&&(addEntityMission(),addEntityMission()),$(this).parent().index()<=1&&(addEntityMissionAtBeginning(),addEntityMissionAtBeginning()),slideMission($(this).parent().index()-2)}function nextMission(e){e.preventDefault(),addEntityMission(),slideMission($("#slider-visu-mission").find("li.active").index()-1)}function sliderMission(){var e=$("#slider-visu-mission");addEntityMission(),posSlideMission(),makeActive(numActive-1),$("#next-slider-mission").on("click",nextMission),isMobile.any&&e.on("swipeleft",nextMission),e.find("a").on("click",clickOnMission)}function goToContact(){htmlTag.hasClass("lt-ie9")?htmlBody.animate({scrollTop:$("#contactezNous").offset().top},800,"easeInOutCubic"):(htmlBody.animate({scrollTop:$("#contactezNous").offset().top-100},800,"easeInOutCubic"),setTimeout(openForm,500))}function setCarouselDots(e,i,t,n){function s(n){function s(n){var s=0,a=0;for(s;n>s;s++)i.eq(s).stop().animate({left:-(n-s)*t},500,"easeOutExpo");for(i.removeClass("on").eq(n).addClass("on").stop().animate({left:0},500,"easeOutExpo"),n;o>n;n++)i.eq(n).stop().animate({left:a*t},500,"easeOutExpo"),a++;e.parents("section").find(".dots").find("li").eq(e.find(".on").index()).find("button").addClass("actif").parents("li").siblings().find("button").removeClass("actif"),d.length&&d.removeClass("on").eq(e.find(".on").index()).addClass("on")}n===!0?e.find(".on").next().length&&s(e.find(".on").next().index()):n===!1?e.find(".on").prev().length&&s(e.find(".on").prev().index()):s(n)}var o=i.length,a=0,l=0,r=0,d=e.parents("section").find(".keyword").find("strong");if(o>1){if(!n){for(e.prepend('<button id="prev" class="navSlider">‹</button>').append('<button id="next" class="navSlider">›</button>'),e.parents(".wrapper-ecran").length?e.parents(".wrapper-ecran").after('<ul class="dots"></ul>'):e.append('<ul class="dots"></ul>'),a;o>a;a++)e.parents("section").find(".dots").append("<li><button>&bull;</button></li>");e.find("#next").on("click",function(){s(!0)}),e.find("#prev").on("click",function(){s(!1)}),isMobile.any&&(e.on("swipeleft",function(){s(!0)}),e.on("swiperight",function(){s(!1)})),e.parents("section").find(".dots").find("button").on("click",function(){s($(this).parents("li").index())})}for(i.css({position:"absolute",top:0}).removeClass("on").eq(0).addClass("on"),l;o>l;l++)i.eq(l).css("left",r),r+=t;e.parents("section").find(".dots").find("button").removeClass("actif").parents("li").siblings().eq(0).find("button").addClass("actif"),d.length&&d.eq(0).addClass("on")}}var myScroll,header=$("header"),htmlTag=$("html"),htmlBody=$("html, body"),body=$("body"),burger=$("#burger"),bgHead=$("#bgHead"),btnContact=$("#demandeContact"),minHeight=$(".menu").innerHeight()-10,subMenus=$(".menu").find(".sub-menu"),avancementLeft=0,avancementLeftFuture=0,precWidth=0,hasDemiBefore=!1,avancementLeftBottom=0;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),$.fn.isOnScreen=function(){var e=$(window),i={top:e.scrollTop(),left:e.scrollLeft()},t=this.offset();return i.right=i.left+e.width(),i.bottom=i.top+e.height(),t.right=t.left+this.outerWidth(),t.bottom=t.top+this.outerHeight(),!(i.right<t.left||i.left>t.right||i.bottom<t.top||i.top>t.bottom)};var joinAnEvent={$el:$("[data-name=join_an_event]"),keywordExists:!1,startListening:function(){this.$el.find("input").on("keyup",$.proxy(this.checkKeyword,this)),this.$el.on("submit",$.proxy(this.goTo,this))},checkKeyword:function(e){var i=this.$el.find("input").val().length;if(3>i||i>20)return 3>i?this.$el.attr("data-status","active"):(this.keywordExists=!1,void this.updateStatus());var t=$(e.currentTarget).val();this.getEvent(t).success($.proxy(function(){this.keywordExists=!0,this.updateStatus(),delete this.xhr},this)).fail($.proxy(function(e){this.keywordExists=404!==e.status,this.updateStatus(),delete this.xhr},this))},getEvent:function(e){return this.xhr&&this.xhr.abort(),this.xhr=$.ajax({url:"https://api.wisembly.com/api/4/event/"+e||"",dataType:"json"})},goTo:function(e){e.preventDefault(),this.keywordExists&&(window.open("https://app.wisembly.com/"+this.$el.find("input").val()),dataLayer.push({keywordWiz:this.$el.find("input").val(),event:"wiz_search"}))},updateStatus:function(){this.$el.attr("data-status",this.keywordExists?"valid":"not-valid")}},tag=document.createElement("script"),player1;tag.src="https://www.youtube.com/player_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var unit=200,unitNaked=122,bigUnitDelta=338-unit,bigUnit=260,total=5,numActive=3,spee=.4;$(function(){isMobile.any||htmlTag.addClass("no-mobile"),body.hasClass("landing")||(setActiveMenu(),setSubMenu(),"fr-FR"!==htmlTag.attr("lang")&&langSelector(),joinAnEvent.startListening()),scrollPage(),$(".filtres").find(".actif").length&&goToContent(),$("#map").length&&setMapSize(),$("#slider-visu-mission").length&&!htmlTag.hasClass("lt-ie9")&&sliderMission(),body.hasClass("page-template-emploi")&&initAnnonces(),$(window).width()>450&&!htmlTag.hasClass("lt-ie9")&&$(".buttonsTeam").length&&setDraggableButton(),$("#message").length&&$("#message").autoGrowTextArea(),burger.on("click",responsiveMenu),$("#triangleMenu").on("click",function(){burger.removeClass("actif"),header.removeClass("menuVisible"),$("#container").css({height:"auto",overflow:"visible"})}),$(".buttonsTeam").find("button").on("click",function(){setSliderTeamProfil($(this)),openForm()}),btnContact.on("click",openForm),$(".formContact").hasClass("open")&&openForm(),$(".bottomHeader").find(".btnFull").on("click",function(e){header.hasClass("menuVisible")&&responsiveMenu(),e.preventDefault(),goToContact()}),$(".home .blocH1").find(".btnFull").on("click",function(e){e.preventDefault(),htmlBody.animate({scrollTop:$("#contactezNous").offset().top-100},800,"easeInOutCubic"),goToContact()}),$("#profil").change(function(){$("#labelEnt").html($(this).val()+" *")}),$(".scrollNext").on("click",goToNextSection),$("#btn-video").on("click",videoCover),$(".form").hasClass("open")&&htmlBody.animate({scrollTop:$(".form").offset().top},800,"easeInOutCubic"),$(window).load(function(){if(body.hasClass("landing")||(centerSubMenu(),scrollMagic()),heightBgHead(),body.hasClass("home")&&randomLogosPress(),$("#sliderRef").length&&!htmlTag.hasClass("lt-ie9")&&setToolTip($("#sliderRef")),$("#sliderTeam").length&&setSliderTeam($(".slidesTeam").eq(0)),$("#etudes").length&&!htmlTag.hasClass("lt-ie9")&&setToolTip($("#etudes")),$(".carousel").length&&(setSliderHeight($(".carousel")),$(".carousel").contentcarousel({sliderEasing:"easeOutExpo"})),$(".gallery").length&&(setSliderHeight($(".gallery")),$(".gallery").contentcarousel({sliderEasing:"easeOutExpo"})),$(".carouselDots").length){setSliderHeight($(".carouselDots"));var e=0,i=$(".carouselDots"),t=i.length;for(e;t>e;e++)setCarouselDots(i.eq(e),i.eq(e).find("li"),i.eq(e).find("li").eq(0).width(),!1)}$("#slider-diapos").length&&positionDiapos()}),$(window).resize(function(){if(body.hasClass("landing")||(minHeight=$(".menu").innerHeight()-10,fixedHeader(),setSubMenu(),centerSubMenu(),setPosBtnMenu()),heightBgHead(),header.hasClass("menuVisible")&&$(window).width()>1040&&responsiveMenu(),$("#map").length&&setMapSize(),$("#next-slider-mission").length&&posSlideMission(),$(".carousel").length&&setSliderHeight($(".carousel")),$(".gallery").length&&setSliderHeight($(".gallery")),$(".carouselDots").length){setSliderHeight($(".carouselDots"));var e=0,i=$(".carouselDots"),t=i.length;for(e;t>e;e++)setCarouselDots(i.eq(e),i.eq(e).find("ul").eq(0).find("li"),i.eq(e).find("li").eq(0).width(),!0)}})});