function shuffle(e){var t=e.map(Math.random);e.sort(function(e,o){return t[e]-t[o]})}function onYouTubeIframeAPIReady(){player1=new YT.Player("player-1")}function fixedHeader(){$(window).width()>1040&&!isMobile.any&&(myScroll>100?header.addClass("on"):header.removeClass("on"))}function apparitionFooter(){isMobile.any||($(".navFooter").isOnScreen()?TweenMax.set($(".rsFooter"),{visibility:"visible"}):TweenMax.set($(".rsFooter"),{visibility:"hidden"}))}function scrollPage(){myScroll=$(document).scrollTop(),fixedHeader(),apparitionFooter(),!htmlTag.hasClass("lt-ie9")&&!isMobile.any&&myScroll<$(".head").height()&&$(window).width()>767&&TweenMax.set(bgHead,{y:-(myScroll/1.5)+"px"}),requestAnimFrame(scrollPage)}function setActiveMenu(){var e=$("#menu-menu-principal"),t=e.find("> li.current-menu-item"),o=e.find(".current_page_parent");t.length?t.siblings().find("a").addClass("notActive"):o.length?o.siblings().find("a").addClass("notActive"):e.find("a").removeClass("notActive")}function setSubMenu(){var e=$(".hasSubMenu");$(window).width()>1040?e.on("mouseover",function(){$(this).addClass("actifHover")}).on("mouseout",function(){$(this).removeClass("actifHover")}):e.unbind()}function centerSubMenu(){if(!htmlTag.hasClass("lt-ie9"))if($(window).width()>1040){var e=subMenus.length,t=0,o,n,i,s,a,l,r,c,d;for(t;e>t;t++){for(n=subMenus.eq(t).find("li"),i=n.length,o=0,s=0,o;i>o;o++)s+=n.eq(o).outerWidth();a=s/2,l=subMenus.eq(t).parents(".hasSubMenu"),r=l.outerWidth()/2,c=l.offset().left,d=r+c-a,s+d>=$(window).width()?subMenus.eq(t).css({"padding-left":0,"text-align":"center"}):subMenus.eq(t).css("padding-left",d+"px")}}else subMenus.css("padding-left",0)}function langSelector(){var e=$(".lang"),t=e.find(".actif");e.prepend(t).find(".actif").eq(1).remove()}function setPosBtnMenu(){var e=$(".bottomHeader").find(".btnFull"),t=$(".topHeader").find("p");$(window).width()<1040?(e.css("top",minHeight),t.css("top",minHeight+80)):(e.css("top",0),t.css("top",0))}function responsiveMenu(){var e=$(window).height()-header.height(),t=$("#container");setPosBtnMenu(),burger.hasClass("actif")?t.css({height:"auto",overflow:"visible"}):(burger.css({opacity:0}).delay(10).animate({opacity:1},100),t.height(e>minHeight?e:htmlTag.hasClass("home")?minHeight:minHeight+100),t.css("overflow","hidden")),burger.toggleClass("actif"),header.toggleClass("menuVisible")}function setSliderTeam(e){function t(){var e=$(this).parents("li").index();o.eq(e).hasClass("on")||($(this).addClass("actif").parents("li").siblings().find("button").removeClass("actif"),o.eq(e).siblings().stop().animate({opacity:0,marginBottom:"-25px"},400,function(){o.eq(e).siblings().removeClass("on"),o.eq(e).addClass("on").stop().animate({opacity:1,marginBottom:0},400)}))}var o=e.find(".slideTeam"),n=o.length,i=0,s=$(".navTeam"),a="<li><button>â€¢</button></li>",l=$(".slidesTeam"),r=l.length,c=0,d;for(c;r>c;c++)l.eq(c).hasClass("on")||l.eq(c).css({opacity:0,bottom:"-140px"});if(s.html(""),n>1)for(i;n>i;i++)s.append(a),o.eq(i).hasClass("on")?d=i:o.eq(i).css({opacity:0,marginBottom:"-25px"});s.find("button").eq(d).addClass("actif"),s.find("button").on("click",t)}function setSliderTeamProfil(e){var t=e.parents("li").index(),o=$(".slidesTeam"),n=o.eq(t),i=$(".contactFooter");e.addClass("actif").parents("li").siblings().find("button").removeClass(),n.hasClass("on")||n.siblings(".slidesTeam").stop().animate({opacity:0,bottom:"-140px"},400,function(){n.siblings(".slidesTeam").removeClass("on"),n.addClass("on").stop().animate({opacity:1,bottom:"-115px"},400),0===t?(TweenLite.set($("#drag"),{x:0}),i.addClass("bleu").removeClass("rose").removeClass("rouge").removeClass("vert")):1===t?(TweenLite.set($("#drag"),{x:130}),i.addClass("rouge").removeClass("rose").removeClass("bleu").removeClass("vert")):2===t?(TweenLite.set($("#drag"),{x:235}),i.addClass("vert").removeClass("rose").removeClass("rouge").removeClass("bleu")):3===t&&(TweenLite.set($("#drag"),{x:334}),i.addClass("rose").removeClass("bleu").removeClass("rouge").removeClass("vert")),setSliderTeam(n)}),$("#profil").find("option[value="+e.attr("name")+"]").prop("selected",!0);var s="Autre"===e.html()?"Organisation":e.html();$("#labelEnt").html(s+" *")}function setDraggableButton(){var e=$(".buttonsTeam").find("button");btnContact.before("<div id='dragIn'><div id='drag'></div></div>"),Draggable.create("#drag",{type:"x",bounds:$("#dragIn"),cursor:"pointer",throwProps:!0,snap:[0,130,235,334],throwResistance:5e3,maxDuration:3,onThrowComplete:function(){var t;0===this.x&&(t=e.eq(0)),130===this.x&&(t=e.eq(1)),235===this.x&&(t=e.eq(2)),334===this.x&&(t=e.eq(3)),setSliderTeamProfil(t)}})}function openForm(){btnContact.length?btnContact.animate({opacity:0},200,function(){btnContact.css("display","none"),$("#contact, #bulle").addClass("visible"),setTimeout(function(){htmlBody.animate({scrollTop:$("#contact").offset().top-250},400,"easeInOutCubic")},300),$("#nom").focus()}):setTimeout(function(){htmlBody.animate({scrollTop:$(".formContact").offset().top-200},500,"easeInOutCubic")},300)}function scrollMagic(){if($(window).width()>767)var e=new ScrollMagic,t=TweenMax.to($("#triangle-top-header"),1.2,{css:{y:"0px",rotation:"0deg",force3D:!0}}),o=TweenMax.to($(".triangle-menu-footer"),1.2,{css:{rotation:"-3deg",y:"0px",opacity:"1",force3D:!0}}),n=new ScrollScene({triggerElement:".menuFooter",duration:$(".menuFooter").outerHeight(),offset:-300}).setTween(o).addTo(e)}function goToNextSection(){htmlBody.animate({scrollTop:$(this).parents(".scrollHere").next(".scrollHere").offset().top-100},400)}function heightBgHead(){$(window).width()>767?(htmlTag.hasClass("lt-ie9")||isMobile.any||TweenMax.set(bgHead,{position:"fixed"}),TweenMax.set(bgHead,{height:$(".head").height()+"px"})):(htmlTag.hasClass("home")&&TweenMax.set(bgHead,{height:"340px"}),TweenMax.set(bgHead,{position:"absolute"}))}function videoCover(){function e(){isMobile.phone||player1.playVideo()}var t=new TimelineMax({onComplete:e});return t.to($(".zone-txt-cover-video"),.2,{y:"100px",opacity:"0",ease:Cubic.easeInOut}).to($(".bg-cover-video"),.5,{rotationZ:1,rotation:"-45deg",y:"-100%",transformOrigin:"left bottom",ease:Cubic.easeInOut}).set($(".cover-video"),{display:"none"}),!1}function randomLogosPress(){var e=$(".logosPresse").find("li"),t=e.length,o=0,n=4,i=0,s=[];if(t>n){for(e.css("display","none"),i;t>i;i++)s[i]=i;for(shuffle(s),o;n>o;o++)e.eq(s[o]).css("display","inline-block")}}function goToContent(){setTimeout(function(){htmlBody.animate({scrollTop:$(".wrapper").offset().top-100},400)},400)}function setMapSize(){$("#map").height($(window).height()-header.height())}var myScroll,header=$("header"),htmlTag=$("html"),htmlBody=$("html, body"),body=$("body"),burger=$("#burger"),bgHead=$("#bgHead"),btnContact=$("#demandeContact"),minHeight=$(".menu").innerHeight()-10,subMenus=$(".menu").find(".sub-menu");window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),$.fn.isOnScreen=function(){var e=$(window),t={top:e.scrollTop(),left:e.scrollLeft()},o=this.offset();return t.right=t.left+e.width(),t.bottom=t.top+e.height(),o.right=o.left+this.outerWidth(),o.bottom=o.top+this.outerHeight(),!(t.right<o.left||t.left>o.right||t.bottom<o.top||t.top>o.bottom)};var tag=document.createElement("script"),player1;tag.src="https://www.youtube.com/player_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag),$(function(){isMobile.any||htmlTag.addClass("no-mobile"),setActiveMenu(),"fr-FR"!==htmlTag.attr("lang")&&langSelector(),scrollPage(),setSubMenu(),$(".filtres").find(".actif").length&&goToContent(),$("#map").length&&setMapSize(),burger.on("click",responsiveMenu),$("#triangleMenu").on("click",function(){burger.removeClass("actif"),header.removeClass("menuVisible"),$("#container").css({height:"auto",overflow:"visible"})}),$(window).width()>450&&!htmlTag.hasClass("lt-ie9")&&$(".buttonsTeam").length&&setDraggableButton(),$(".buttonsTeam").find("button").on("click",function(){setSliderTeamProfil($(this))}),btnContact.on("click",openForm),$(".formContact").hasClass("open")&&openForm(),$(".bottomHeader").find(".btnFull").on("click",function(e){header.hasClass("menuVisible")&&responsiveMenu(),e.preventDefault(),htmlTag.hasClass("lt-ie9")?htmlBody.animate({scrollTop:$("#contactezNous").offset().top},800,"easeInOutCubic"):(htmlBody.animate({scrollTop:$("#contactezNous").offset().top-100},800,"easeInOutCubic"),setTimeout(openForm,500))}),$(".blocH1").find(".btnFull").on("click",function(e){e.preventDefault(),htmlBody.animate({scrollTop:$("#contactezNous").offset().top-100},800,"easeInOutCubic"),htmlTag.hasClass("lt-ie9")?htmlBody.animate({scrollTop:$("#contactezNous").offset().top},800,"easeInOutCubic"):(htmlBody.animate({scrollTop:$("#contactezNous").offset().top-100},800,"easeInOutCubic"),setTimeout(openForm,500))}),$("#profil").change(function(){$("#labelEnt").html($(this).val()+" *")}),$(".scrollNext").on("click",goToNextSection),$("#btn-video").on("click",videoCover),$(window).load(function(){heightBgHead(),centerSubMenu(),scrollMagic(),body.hasClass("home")&&randomLogosPress(),$("#sliderTeam").length&&setSliderTeam($(".slidesTeam").eq(0)),$("#sliderRef").length&&$("#sliderRef").contentcarousel({sliderSpeed:500,sliderEasing:"easeOutExpo",itemSpeed:500,itemEasing:"easeOutExpo",scroll:1})}),$(window).resize(function(){minHeight=$(".menu").innerHeight()-10,fixedHeader(),heightBgHead(),setSubMenu(),centerSubMenu(),setPosBtnMenu(),header.hasClass("menuVisible")&&$(window).width()>1040&&responsiveMenu(),$("#map").length&&setMapSize()})});